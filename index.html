<html>
<head>
	<title>Mailto Generator</title>
	<script type="text/javascript">

		var subject = 'Important Action';
		var from = 'Brian Outlaw';
		var recipients = [
			['Karl Keefer', 'karl@karlkeefer.com'],
			['Some Senator', 'fake@emailaddress.com'],
		];

		var template = 
`Dear {{name}},

I'm writing to you to share my thoughts on this important issue.

Thanks for your consideration,
- {{from}}`

		window.addEventListener('DOMContentLoaded', function(){
			var results = document.getElementById('results');

			for (var i=0; i<recipients.length;i++) {
				var a = document.createElement('a');
				a.href = 'mailto:'+recipients[i][1]+'?subject='+subject+'&body='+formatBody(recipients[i][0])
				a.appendChild(document.createTextNode('Email '+recipients[i][0]));
				a.target = '_blank';
				a.style.display = 'block';
				results.appendChild(a);
			}
		});

		function formatBody(recipient) {
			return encodeURIComponent(template.replace('{{name}}', recipient).replace('{{from}}', from));
		}
	</script>
</head>
<body>
	<div id="results">
	</div>
</body>
</html>
